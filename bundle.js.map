{"version":3,"sources":["webpack:///webpack/bootstrap d168af9fbf13a1c000db","webpack:///./lib/scrape.js"],"names":["profileInformation","numLikers","document","addEventListener","chrome","runtime","onMessage","addListener","message","sender","sendResponse","console","log","verticals","receiveVerticals","ads","receiveAds","likers","receiveLikers","profile","receiveProfile","getElementById","runScrape","button","disabled","style","opacity","getVerticals","setStatus","tabs","executeScript","file","getAds","verticalTitle","url","create","active","tab","code","remove","id","getLikers","adTitle","getProfile","length","i","push","writeToCSV","csv","convertToCSV","undefined","data","encodeURI","downloadLink","createElement","setAttribute","vertical","click","status","innerText","contacts","cToK","columnToKeyMap","headers","result","join","res","j"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d168af9fbf13a1c000db","let profileInformation = [];\nlet numLikers = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) =>{\n    console.log(message);\n    if (message.verticals){\n      receiveVerticals(message.verticals);\n    } else if (message.ads){\n      receiveAds(message.ads);\n    } else if (message.likers) {\n      receiveLikers(message.likers);\n    } else if(message.profile){\n      receiveProfile(message.profile);\n    }\n  });\n\n  document.getElementById('extract-description').addEventListener('click', runScrape);\n});\n\nfunction runScrape(){\n  let button = document.getElementById('extract-description');\n  button.disabled = true;\n  button.style.opacity = '0.7';\n  getVerticals();\n}\n\nfunction getVerticals() {\n  setStatus('Fetching verticals');\n  chrome.tabs.executeScript({file: './lib/pullVerticalsFromCampaignManager.js'});\n}\n\nfunction getAds({verticalTitle, url}) {\n  setStatus(`Fetching ads from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript({\n      file: './lib/pullAdsFromVertical.js',\n      code: `let verticalTitle = ${verticalTitle};`\n    }, () => chrome.tabs.remove(tab.id));\n  });\n}\n\nfunction getLikers({verticalTitle, adTitle, url}) {\n  setStatus(`Fetching likers from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript({\n      file: './lib/pullLikersFromAdPage.js',\n      code: `let title = {verticalTitle: ${verticalTitle}, adTitle: ${adTitle}};`\n    }, () => chrome.tabs.remove(tab.id));\n  });\n}\n\nfunction getProfile({verticalTitle, adTitle, url}){\n  setStatus(`Fetching profile information from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript(tab.id, {\n      file: './lib/pullInfoFromPageProfile.js',\n      code: `let title = {verticalTitle: ${verticalTitle}, adTitle: ${adTitle}};`\n    }, () => chrome.tabs.remove(tab.id));\n  });\n}\n\nfunction receiveVerticals(verticals){\n  console.log(`verticals: ${verticals.length}`);\n  console.log(verticals);\n  for (let i = 0; i < verticals.length; i++) {\n    getAds(verticals[i]);\n  }\n}\n\nfunction receiveAds(ads){\n  for (let i = 0; i < ads.length; i++) {\n    getLikers(ads[i]);\n  }\n}\n\nfunction receiveLikers(likers){\n  numLikers += likers.length;\n  for (let i = 1; i < likers.length; i++) {\n    getProfile(likers[i]);\n  }\n}\n\nfunction receiveProfile(profile){\n  profileInformation.push(profile);\n  console.log(`likes: ${numLikers}\\nprofiles: ${profileInformation.length}`);\n}\n\nfunction writeToCSV(){\n  let csv = convertToCSV();\n  if (csv === null) {\n    setStatus('Error creating CSV');\n    return undefined;\n  }\n  let data = encodeURI('data:text/csv;charset=utf-8,'+csv);\n\n  let downloadLink = document.createElement('a');\n  downloadLink.setAttribute('href', data);\n  downloadLink.setAttribute('download', `${vertical}_ad_likers.csv`);\n  downloadLink.click();\n  setStatus('completed');\n}\n\nfunction setStatus(status){\n  document.getElementById('status').innerText = status;\n}\n\nfunction convertToCSV(){\n  if(contacts.length === 0) {\n    setStatus('Error - No contacts found');\n    return undefined;\n  }\n\n  let cToK = columnToKeyMap();\n\n  let headers = ['\\\"Profile\\\"', '\\\"First Name\\\"', '\\\"Last Name\\\"', '\\\"Email\\\"', '\\\"Company\\\"', '\\\"Title\\\"', '\\\"Ad\\\"', '\\\"Vertical\\\"'];\n  let result = headers.join(\",\")+\"\\n\";\n  for (let i = 0; i < contacts.length; i++) {\n    let res = [];\n    for (let j = 0; j < headers.length; j++) {\n      res.push(`\\\"${contacts[i][cToK[headers[j]]]}\\\"`);\n    }\n    result += res.join(\",\")+\"\\n\";\n  }\n  return result;\n}\n\nfunction columnToKeyMap(){\n  return {\n    '\\\"Profile\\\"': 'profile_url',\n    '\\\"First Name\\\"': 'first_name',\n    '\\\"Last Name\\\"': 'last_name',\n    '\\\"Email\\\"': 'email',\n    '\\\"Company\\\"': 'company',\n    '\\\"Title\\\"': 'title',\n    '\\\"Ad\\\"': 'ad',\n    '\\\"Vertical\\\"': 'vertical'\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/scrape.js"],"sourceRoot":""}