{"version":3,"sources":["webpack:///webpack/bootstrap 630284bc46b80e49ab18","webpack:///./lib/scrape.js"],"names":["profileInformation","document","addEventListener","chrome","runtime","onMessage","addListener","message","sender","sendResponse","verticals","receiveVerticals","ads","receiveAds","likers","receiveLikers","profile","receiveProfile","getElementById","runScrape","button","disabled","style","opacity","getVerticals","setStatus","tabs","executeScript","file","getAds","verticalTitle","url","create","active","tab","id","code","setTimeout","remove","getLikers","adTitle","getProfile","numVerticals","length","i","numAds","push","writeToCSV","csv","convertToCSV","undefined","data","encodeURI","downloadLink","createElement","setAttribute","vertical","click","status","innerText","contacts","cToK","columnToKeyMap","headers","result","join","res","j"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 630284bc46b80e49ab18","let profileInformation = [];\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) =>{\n    if (message.verticals){\n      receiveVerticals(message.verticals);\n    } else if (message.ads){\n      receiveAds(message.ads);\n    } else if (message.likers) {\n      receiveLikers(message.likers);\n    } else if(message.profile){\n      receiveProfile(message.profile);\n    }\n  });\n\n  document.getElementById('extract-description').addEventListener('click', runScrape);\n});\n\nfunction runScrape(){\n  let button = document.getElementById('extract-description');\n  button.disabled = true;\n  button.style.opacity = '0.7';\n  getVerticals();\n}\n\nfunction getVerticals() {\n  setStatus('Fetching verticals');\n  chrome.tabs.executeScript({file: \"./lib/pullVerticals.js\"});\n}\n\nfunction getAds({verticalTitle, url}) {\n  setStatus(`Fetching ads from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript(tab.id, {code: `let verticalTitle = '${verticalTitle}'`}, () => {\n      chrome.tabs.executeScript(tab.id, {file: './lib/pullAds.js'}, () => setTimeout(() => chrome.tabs.remove(tab.id), 7500));\n    });\n  });\n}\n\nfunction getLikers({verticalTitle, adTitle, url}) {\n  setStatus(`Fetching likers from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript(tab.id, {code: `let verticalTitle = '${verticalTitle}'; let adTitle = '${adTitle}'`}, () => {\n      chrome.tabs.executeScript(tab.id, {file: './lib/pullLikers.js'}, () => setTimeout(() => chrome.tabs.remove(tab.id), 7500));\n    });\n  });\n}\n\nfunction getProfile({verticalTitle, adTitle, url}){\n  setStatus(`Fetching profile information from ${verticalTitle}`);\n  chrome.tabs.create({url: url, active: false}, (tab) => {\n    chrome.tabs.executeScript(tab.id, {code: `let verticalTitle = '${verticalTitle}'; let adTitle = '${adTitle}'`}, () => {\n      chrome.tabs.executeScript(tab.id, {file: './lib/pullProfileInfo.js'}, () => setTimeout(() => chrome.tabs.remove(tab.id), 7500));\n    });\n  });\n}\n\nfunction receiveVerticals(verticals){\n  numVerticals += verticals.length;\n  for (let i = 0; i < verticals.length; i++) {\n    setTimeout(() => getAds(verticals[i]), i*7500);\n  }\n}\n\nfunction receiveAds(ads){\n  numAds += ads.length;\n  for (let i = 0; i < ads.length; i++) {\n    setTimeout(() => getLikers(ads[i]), i*7500);\n  }\n}\n\nfunction receiveLikers(likers){\n  for (let i = 1; i < likers.length; i++) {\n    setTimeout(() => getProfile(likers[i]), i*7500);\n  }\n}\n\nfunction receiveProfile(profile){\n  profileInformation.push(profile);\n}\n\nfunction writeToCSV(){\n  let csv = convertToCSV();\n  if (csv === null) {\n    setStatus('Error creating CSV');\n    return undefined;\n  }\n  let data = encodeURI('data:text/csv;charset=utf-8,'+csv);\n\n  let downloadLink = document.createElement('a');\n  downloadLink.setAttribute('href', data);\n  downloadLink.setAttribute('download', `${vertical}_ad_likers.csv`);\n  downloadLink.click();\n  setStatus('completed');\n}\n\nfunction setStatus(status){\n  document.getElementById('status').innerText = status;\n}\n\nfunction convertToCSV(){\n  if(contacts.length === 0) {\n    setStatus('Error - No contacts found');\n    return undefined;\n  }\n\n  let cToK = columnToKeyMap();\n\n  let headers = ['\\\"Profile\\\"', '\\\"First Name\\\"', '\\\"Last Name\\\"', '\\\"Email\\\"', '\\\"Company\\\"', '\\\"Title\\\"', '\\\"Ad\\\"', '\\\"Vertical\\\"'];\n  let result = headers.join(\",\")+\"\\n\";\n  for (let i = 0; i < contacts.length; i++) {\n    let res = [];\n    for (let j = 0; j < headers.length; j++) {\n      res.push(`\\\"${contacts[i][cToK[headers[j]]]}\\\"`);\n    }\n    result += res.join(\",\")+\"\\n\";\n  }\n  return result;\n}\n\nfunction columnToKeyMap(){\n  return {\n    '\\\"Profile\\\"': 'profileURL',\n    '\\\"First Name\\\"': 'firstName',\n    '\\\"Last Name\\\"': 'lastName',\n    '\\\"Email\\\"': 'email',\n    '\\\"Company\\\"': 'company',\n    '\\\"Title\\\"': 'title',\n    '\\\"Ad\\\"': 'adTitle',\n    '\\\"Vertical\\\"': 'verticalTitle'\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/scrape.js"],"sourceRoot":""}